<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div id="game">
        <div><a href="main 1.html">홈 </a><a href="">상세 </a><a href="">훈련 </a>
           <a href="">전투 </a>
        </div>
        <div>
    <button onclick="start()">시작합니다</button>

    <button onclick="Mysterious_cave_left_road_bt()">실험</button>
    <div id="game">
        <div id="log"></div>
    </div>
</body>
</html>
<script>
    var onof = true;
    var re_point = 0;
    var out_button = "";
    var home_button = "";
    var find_button = "";
    var Mysterious_cave_left_road = "";
    var Mysterious_cave_left_road = "";
    

    function logMessage(msg, color) {
        if (!color) { color = 'black'; } // 전투 실행 로그 색

        var div = document.createElement('div'); // 변수 div에 div를 생성하는 함수 대입
        div.innerHTML = msg; // 그 div에 msg 값 대입
        div.style.color = color; // 그 div 스타일 설정
        document.getElementById('log').appendChild(div); // log에 div변수 값 대입
    }

    function start() {
        Character()
        var trap = trap_Sponsor();
        var boss_monster = boss_monster_Sponsor();
        var monster = monster_Sponsor();
        if(re_point >= 10){

            alert("자동 전투");
            logMessage("동굴 안에서 수상한 냄새가 나고 있습니다");
            logMessage("무언가에 홀린듯 동굴로 들어갑니다");
            logMessage("동굴 안쪽에는 최근에도 무엇인가 살았던 흔적이 곳곳에 남아있습니다");
            logMessage(monster.name+"를 조우");
            logMessage(hero.name+"과"+monster.name+"이 전투 합니다");

            monster.hp -= hero.att;
            if(monster.hp <= 0){
                logMessage(hero.name+"이(가)"+monster.name+"과 의 전투에서 승리 했습니다");
                logMessage("남은 체력은"+hero.hp)
            };

            var choice_rm = Math.floor(Math.random()*2);

                if(choice_rm == 0){
                    hero.hp = hero.hp- trap.att
                    logMessage(hero.name+"이(가)"+trap.name+"에 당했습니다"+hero.name+"의 남은 체력은"+hero.hp+"입니다");

                    Mysterious_cave_right_road.remove();
                }
                else if(choice_rm > 0){
                    var boss_monster = boss_monster_Sponsor();
        
                    logMessage("동굴 깊숙히 들어갑니다");
                    logMessage("횟불 하나에 의지한체 깊고 깊은 동굴을 들어갑니다");
                    logMessage("그러자 주변이 달라짐이 느껴집니다!");
                    logMessage(boss_monster.name+"를 조우!!");
                    logMessage(boss_monster.name+"은(를) 강한 상대 입니다");
                    logMessage(hero.name+"과"+boss_monster.name+"이 전투 합니다");

                    while(true){
                        boss_monster.hp -= hero.att;
                        if(boss_monster.hp <= 0){
                            logMessage(hero.name+"이(가)"+boss_monster.name+"과 의 전투에서 승리 했습니다 축하드립니다");
                            logMessage("남은 체력은"+hero.hp);
                            Mysterious_cave_right_road.remove();
                            Mysterious_cave_left_road.remove();

                            re_point += 1;

                            // 처음으로
                            rm_Go_back = document.createElement( 'button' );
                            var rm_Go_back_text = document.createTextNode( '처음으로' );
                            rm_Go_back.appendChild( rm_Go_back_text );
                            document.body.appendChild( rm_Go_back );
                            rm_Go_back.setAttribute( 'onclick' ,"rm_Go_back_bt()" );
                            logMessage(re_point);
                            break;
                        }
                        logMessage(boss_monster.name+"의 체력이 "+boss_monster.hp+"가 되었습니다.");
                        hero.hp -= boss_monster.att;
                


                    if(hero.hp <= 0){
                    logMessage(hero.name+"이(가)"+boss_monster.name+"과 의 전투에서 패배 했습니다");

                    Mysterious_cave_right_road.remove();
                    Mysterious_cave_left_road.remove();

                    // 처음으로
                    rm_Go_back = document.createElement( 'button' );
                    var rm_Go_back_text = document.createTextNode( '처음으로' );
                    rm_Go_back.appendChild( rm_Go_back_text );
                    document.body.appendChild( rm_Go_back );
                    rm_Go_back.setAttribute( 'onclick' ,"rm_Go_back_bt()" );
                    break;
                }
                logMessage(hero.name+"의 체력이 "+hero.hp+"가 되었습니다.");
            }
        }

        }
        else{
            var log = document.getElementById('log');
        // log.innerHTML = "";
        logMessage("동굴 안에서 수상한 냄새가 나고 있습니다");
        logMessage("들어가시겠습니까?");
        // 들어간다
        out_button = document.createElement( 'button' );
        var out_text_button = document.createTextNode( '들어간다' );
        out_button.appendChild( out_text_button );
        document.body.appendChild( out_button );
        out_button.setAttribute( 'onclick' ,"out_battle()" );
        document.querySelector(".btn-submit").setAttribute("disabled", "true");
        }


        // var log = document.getElementById('log');
        // // log.innerHTML = "";
        // logMessage("동굴 안에서 수상한 냄새가 나고 있습니다");
        // logMessage("들어가시겠습니까?");
        // // 들어간다
        // out_button = document.createElement( 'button' );
        // var out_text_button = document.createTextNode( '들어간다' );
        // out_button.appendChild( out_text_button );
        // document.body.appendChild( out_button );
        // out_button.setAttribute( 'onclick' ,"out_battle()" );
        // document.querySelector(".btn-submit").setAttribute("disabled", "true");
        
        


    }

    // 객체가 생성된것
    var hero = new Character(prompt('이름을 입력'), 100, 10, 1, 0);

    // 캐릭터 생성 이름, 체력, 공격력
    function Character(name, hp, att, lev, xp){
        this.name = name;
        this.hp = hp;
        this.att = att;
        this.lev = lev;
        this.xp = xp;
    }

    //몬스터 생성하기
    function Monster(name, hp, att, lev, xp){
        this.name = name;
        this.hp = hp;
        this.att = att;
        this.lev = lev;
        this.xp = xp;
    }

    // 몬스터 생성 이름, 체력, 공격력
    function monster_Sponsor(){

        var monsters = [
            ["Goblin", 5, 1, 1, 1],
            ["Trol", 10, 10, 1, 1],
            ["Orc", 10, 100, 1, 1],
            ["Human", 5, 5, 5, 5]
        ];
        var monster = monsters[Math.floor(Math.random()*4)];
        return new Monster(monster[0], monster[1], monster[3], monster[4])
    }

    // 보스 몬스터 생성하기
    function Boss_monster(name, hp, att, lev, xp){
        this.name = name;
        this.hp = hp;
        this.att = att;
        this.lev = lev;
        this.xp = xp;
    }

    // 보스 몬스터 생성 이름, 체력, 공격력
    function boss_monster_Sponsor(){

        // var boss_monsters = [
        //     ["King_Goblin", 50, 10, 1, 5],
        //     ["King_Trol", 100, 20, 3, 20],
        //     ["King_Orc", 150, 25, 7, 100]
        // ];

        var boss_monsters = [
            ["King_Goblin", 1, 1, 1, 5],
            ["King_Trol", 1, 1, 3, 20],
            ["King_Orc", 1, 1, 7, 100]
        ];
        var boss_monster = boss_monsters[Math.floor(Math.random()*3)];
        return new Boss_monster(boss_monster[0], boss_monster[1], boss_monster[2], boss_monster[3])
    }

    //함정 생성하기
    function Trap(name, att){
        this.name = name;
        this.hp = hp;
        this.att = att;
    }

    // 함정 생성 이름, 체력, 공격력
    function trap_Sponsor(name, att){

        var traps = [
            ["poison", 5],
            ["arrow", 5]
        ];
        var trap = traps[Math.floor(Math.random()*2)];
        return new Trap(trap[0], trap[1])
    }
    
    function out_battle(){
        var monster = monster_Sponsor();

        logMessage("동굴 안쪽에는 최근에도 무엇인가 살았던 흔적이 곳곳에 남아있습니다");
        logMessage(monster.name+"를 조우");
        logMessage(hero.name+"과"+monster.name+"이 전투 합니다");

        // 몬스터 체력은 몬스터 체력만큼이다, 몬스터 체력이 0보다 작거나 같아지면 xp++
        while(true){
            monster.hp -= hero.att;
            if(monster.hp <= 0){
                logMessage(hero.name+"이(가)"+monster.name+"과 의 전투에서 승리 했습니다");
                logMessage("남은 체력은"+hero.hp);

                // 둘러보기
                find_button = document.createElement( 'button' );
                var find_text_button = document.createTextNode( '전진하기' );
                find_button.appendChild( find_text_button );
                document.body.appendChild( find_button );
                find_button.setAttribute( 'onclick' ,"Find()" );
                
                // onof = true;

                // 나가기 지우기
                out_button.remove();
                home_button.remove();
                break;
            }
            logMessage(monster.name+"의 체력이 "+monster.hp+"가 되었습니다.");
            hero.hp -= monster.att;
            if(hero.hp <= 0){
                logMessage(hero.name+"이(가)"+monster.name+"과 의 전투에서 패배 했습니다");
                
                // 처음으로
                Go_back = document.createElement( 'button' );
                var Go_back_text = document.createTextNode( '처음으로' );
                Go_back.appendChild( Go_back_text );
                document.body.appendChild( Go_back );
                Go_back.setAttribute( 'onclick' ,"Go_back_bt()" );
                break;
            }   
        }
        
    }

    function Go_back_bt(){
        location.reload(true);
    }

    function rm_Go_back_bt(){
        location.reload(true);
    }

    function Find(){

        find_button.remove();

        logMessage(" 깊고 깊게 들어갑니다..... ");
        logMessage(" 양갈래 길이 나왔습니다 어디로 들어가시겠습니까?");

        // 갈림길 오른쪽
        Mysterious_cave_right_road = document.createElement( 'button' );
        var Mysterious_cave_right_road_text = document.createTextNode( '오른쪽' );
        Mysterious_cave_right_road.appendChild( Mysterious_cave_right_road_text );
        document.body.appendChild( Mysterious_cave_right_road );
        Mysterious_cave_right_road.setAttribute( 'onclick' ,"Mysterious_cave_right_road_bt()" );

        // 갈림길 왼쪽
        Mysterious_cave_left_road = document.createElement( 'button' );
        var Mysterious_cave_left_road_text = document.createTextNode( '왼쪽' );
        Mysterious_cave_left_road.appendChild( Mysterious_cave_left_road_text );
        document.body.appendChild( Mysterious_cave_left_road );
        Mysterious_cave_left_road.setAttribute( 'onclick' ,"Mysterious_cave_right_road_bt()" );

        
    }

    function Mysterious_cave_right_road_bt(){
        Character()
        var trap = trap_Sponsor();
        

        var choice_rm = Math.floor(Math.random()*2);

        if(choice_rm == 0){
            hero.hp = hero.hp- trap.att
            logMessage(hero.name+"이(가)"+trap.name+"에 당했습니다"+hero.name+"의 남은 체력은"+hero.hp+"입니다");

            Mysterious_cave_right_road.remove();
        }
        else if(choice_rm > 0){
            var boss_monster = boss_monster_Sponsor();
        
            logMessage("동굴 깊숙히 들어갑니다");
            logMessage("횟불 하나에 의지한체 깊고 깊은 동굴을 들어갑니다");
            logMessage("그러자 주변이 달라짐이 느껴집니다!");
            logMessage(boss_monster.name+"를 조우!!");
            logMessage(boss_monster.name+"은(를) 강한 상대 입니다");
            logMessage(hero.name+"과"+boss_monster.name+"이 전투 합니다");

            while(true){
                boss_monster.hp -= hero.att;
                if(boss_monster.hp <= 0){
                    logMessage(hero.name+"이(가)"+boss_monster.name+"과 의 전투에서 승리 했습니다 축하드립니다");
                    logMessage("남은 체력은"+hero.hp);
                    Mysterious_cave_right_road.remove();
                    Mysterious_cave_left_road.remove();

                    re_point += 1;

                    // 처음으로
                    Go_back = document.createElement( 'button' );
                    var Go_back_text = document.createTextNode( '처음으로' );
                    Go_back.appendChild( Go_back_text );
                    document.body.appendChild( Go_back );
                    Go_back.setAttribute( 'onclick' ,"Go_back_bt()" );
                    logMessage(re_point);
                    break;
                }
                logMessage(boss_monster.name+"의 체력이 "+boss_monster.hp+"가 되었습니다.");
                hero.hp -= boss_monster.att;
                


                if(hero.hp <= 0){
                    logMessage(hero.name+"이(가)"+boss_monster.name+"과 의 전투에서 패배 했습니다");

                    Mysterious_cave_right_road.remove();
                    Mysterious_cave_left_road.remove();

                    // 처음으로
                    Go_back = document.createElement( 'button' );
                    var Go_back_text = document.createTextNode( '처음으로' );
                    Go_back.appendChild( Go_back_text );
                    document.body.appendChild( Go_back );
                    Go_back.setAttribute( 'onclick' ,"Go_back_bt()" );
                    break;
                }
                logMessage(hero.name+"의 체력이 "+hero.hp+"가 되었습니다.");
            }
        }
    }
// // -------------------------------------------------------------------------------

//     function bt2(){
//         logMessage("앞에서 나를 끌어당기는 듯한 느낌이 납니다");
//         logMessage("홀린듯이 전진합니다");

        

//     }
//     function Mysterious_cave_left_road_bt(){
//         var monster = monster_Sponsor();

//         logMessage("동굴 안쪽에는 최근에도 무엇인가 살았던 흔적이 곳곳에 남아있습니다");
//         logMessage(monster.name+"를 조우");
//         logMessage(hero.name+"과"+monster.name+"이 전투 합니다");

//         // 몬스터 체력은 몬스터 체력만큼이다, 몬스터 체력이 0보다 작거나 같아지면 xp++
//         while(true){
//             monster.hp -= hero.att;
//             if(monster.hp <= 0){
//                 logMessage(hero.name+"이(가)"+monster.name+"과 의 전투에서 승리 했습니다");
//                 logMessage("남은 체력은"+hero.hp);

//                 // 둘러보기
//                 bt_button = document.createElement( 'button' );
//                 var bt_button_text = document.createTextNode( '전투2' );
//                 bt_button_button.appendChild( bt_button_text );
//                 document.body.appendChild( bt_button );
//                 bt_button.setAttribute( 'onclick' ,"bt2()" );
                
//                 // 나가기 지우기
//                 out_button.remove();
//                 home_button.remove();
//                 break;
//             }
//             logMessage(monster.name+"의 체력이 "+monster.hp+"가 되었습니다.");
//             hero.hp -= monster.att;
//             if(hero.hp <= 0){
//                 logMessage(hero.name+"이(가)"+monster.name+"과 의 전투에서 패배 했습니다");
                
//                 // 처음으로
//                 Go_back = document.createElement( 'button' );
//                 var Go_back_text = document.createTextNode( '처음으로' );
//                 Go_back.appendChild( Go_back_text );
//                 document.body.appendChild( Go_back );
//                 Go_back.setAttribute( 'onclick' ,"Go_back_bt()" );
//                 break;
//             }   
//         }
        
//     }
</script>